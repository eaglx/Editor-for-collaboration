#!/bin/bash

str=$(sudo dpkg -s python3-pyqt4 | grep -oh "installed")
reset
if [ "$str" == "installed" ]; then
    echo "> Python3-qt4 installed"
else
    echo "> Wait we need lib :P Python3-qt4"
    sudo apt-get install python3-pyqt4
fi

echo "> Compile server ..."
g++ server/main.cpp server/client_handle.cpp server/editor.cpp -o server/server -Wall -Wextra -std=c++11 -lpthread
if [ $? -eq 0 ]; then
    echo "> Server build"
else
    echo "> Server build failed"
    exit 1
fi

echo "> Compile client ..."
g++ client/main.cpp -o client/client -Wall -Wextra -std=c++11 -lpthread
if [ $? -eq 0 ]; then
    echo "> Client build"
else
    echo "> Client build failed"
    exit 2
fi
